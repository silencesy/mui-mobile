<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1, user-scalable=no">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<link rel="stylesheet" href="css/mui.min.css">
	<link rel="stylesheet" href="css/style.css">
	<!-- 字体图标 -->
	<link rel="stylesheet" href="http://at.alicdn.com/t/font_259571_jmbdwkgo4etdquxr.css">
	<style type="text/css">
		#list {
			/*避免导航边框和列表背景边框重叠，看起来像两条边框似得；*/
			margin-top: -1px;
		}

		
	</style>
</head>
<body>
	<div class="layout cart-layout" id="app">
		<header id="header" class="mui-bar mui-bar-nav ">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">Cart</h1>
			<button class="mui-btn mui-btn-blue mui-btn-link mui-pull-right edit-btn">Edit</button>
		</header>
		<nav class="mui-bar mui-bar-tab">
			<a class="mui-tab-item" href="./home-page.html">
				<span class="mui-icon iconfont icon-shanghu1"></span>
				<span class="mui-tab-label">Home</span>
			</a>
			<a class="mui-tab-item mui-active" href="#cart">
				<span class="mui-icon iconfont icon-gouwuche"><span class="mui-badge">9</span></span>
				<span class="mui-tab-label">Cart</span>
			</a>
			<a class="mui-tab-item" href="./me.html">
				<span class="mui-icon iconfont icon-me"></span>
				<span class="mui-tab-label">Me</span>
			</a>
			<a class="mui-tab-item" href="./more.html">
				<span class="mui-icon iconfont icon-iconfonthome"></span>
				<span class="mui-tab-label">More</span>
			</a>
		</nav>
		<div class="mui-content">

			<div id="cart" class="cart mui-control-content mui-active">
				<ul id="cartList" class="mui-table-view cart-table-view">
					<li class="mui-table-view-cell">
						<div class="mui-slider-right mui-disabled">
							<a class="mui-btn smart-theme-color">Delete</a>
						</div>
						<div class="mui-slider-handle">
							<div class="mui-input-row mui-checkbox mui-left">

								<div class="product-list-info">
									<p>itemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemit</p>
									<div class="product-buy-info clearfix">
										<span class="product-list-price fl">￥23.00</span>
										<span class="product-list-number fr">x1</span>
									</div>
								</div>	
								<label>							
									<img src="images/prodeuctdemo.png" alt="">
								</label>
								<input name="checkbox" class="listCheckBox" value="Item 1" type="checkbox" >
							</div>
						</div>
					</li>
					<li class="mui-table-view-cell">
						<div class="mui-slider-right mui-disabled">
							<a class="mui-btn smart-theme-color">Delete</a>
						</div>
						<div class="mui-slider-handle">
							<div class="mui-input-row mui-checkbox mui-left">

								<div class="product-list-info">
									<p>itemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemit</p>
									<div class="product-buy-info clearfix">
										<span class="product-list-price fl">￥23.00</span>
										<span class="product-list-number fr">x1</span>
									</div>
								</div>	
								<label>							
									<img src="images/prodeuctdemo.png" alt="">
								</label>
								<input name="checkbox" class="listCheckBox" value="Item 1" type="checkbox" >
							</div>
						</div>
					</li>
					<li class="mui-table-view-cell">
						<div class="mui-slider-right mui-disabled">
							<a class="mui-btn smart-theme-color">Delete</a>
						</div>
						<div class="mui-slider-handle">
							<div class="mui-input-row mui-checkbox mui-left">

								<div class="product-list-info">
									<p>itemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemit</p>
									<div class="product-buy-info clearfix">
										<span class="product-list-price fl">￥23.00</span>
										<span class="product-list-number fr">x1</span>
									</div>
								</div>	
								<label>							
									<img src="images/prodeuctdemo.png" alt="">
								</label>
								<input name="checkbox" class="listCheckBox" value="Item 1" type="checkbox" >
							</div>
						</div>
					</li>
					<li class="mui-table-view-cell">
						<div class="mui-slider-right mui-disabled">
							<a class="mui-btn smart-theme-color">Delete</a>
						</div>
						<div class="mui-slider-handle">
							<div class="mui-input-row mui-checkbox mui-left">
								<div class="product-list-info">
									<a href="login.html">
										<p>itemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemitemit</p>
									</a>
									<!-- <div class="product-buy-info clearfix">
										<span class="product-list-price fl">￥23.00</span>
										<span class="product-list-number fr">x1</span>
									</div> -->
									<div class="sub-add">
										<i class="iconfont icon-icon sub"></i>
										<input type="text" value="1">
										<i class="iconfont icon-jia add"></i>
									</div>
								</div>
								<label>							
									<img src="images/prodeuctdemo.png" alt="">
								</label>
								<input name="checkbox" class="listCheckBox" value="Item 1" type="checkbox" >
							</div>
						</div>
					</li>
					
					
				
					
				</ul>
				<!-- 结算导航栏 -->
				<nav class="settlement-box" id="checkAll">
					<div class="mui-input-row mui-checkbox mui-left">
						<label >All</label>
						<input name="checkbox" id="checkAllInput" value="Item 1" type="checkbox" >
					</div>
					<div class="total">
						Total:<span>￥0</span>
					</div>
					<span class="buy-btn">To pay</span>
				</nav>
			</div>
		</div>
	</div>


	<script src="js/mui.min.js"></script>

	<script>
		
		
		(function($) {

			mui.init({
				swipeBack:true //启用右滑关闭功能
			});

			
			//拖拽后显示操作图标，点击操作图标删除元素；
			$('#cartList').on('tap', '.mui-btn', function(event) {
				var elem = this;
				var li = elem.parentNode.parentNode;
				console.log(li);
				mui.confirm('确认删除该条记录？', 'Hello MUI', btnArray, function(e) {
					if (e.index == 0) {
						var i = 2;
						if (i===2) {
							
							li.parentNode.removeChild(li);
							cartIsEmpty ();
						} else {
							$.swipeoutClose(li);
							mui.toast('欢迎体验Hello MUI');
						}

					} else {
						setTimeout(function() {
							$.swipeoutClose(li);
						}, 0);
					}
				});
			});
			var btnArray = ['Confirm', 'Cancel'];
			mui('.settlement-box').on('change', 'input', function() {
				var value = this.checked;
				mui('.listCheckBox').each(function() {
					if (value) {
						this.checked = true;
					} else {
						this.checked = false;
					}
				});

			});

			mui('.mui-table-view-cell').on('change', 'input', function() {
				var checkAllInput = document.getElementById('checkAllInput');
				var flag = 0;
				mui('.listCheckBox').each(function(index, el) {
					if (this.checked) {
						flag++;
					}
				});
				if(flag==mui('.listCheckBox').length) {
					checkAllInput.checked = true;
					
				} else {
					checkAllInput.checked = false;
					
				}

			});

			// $(".sub").click(function(){
			// 	var n=$(this).next().val();
			// 	var num=parseInt(n)-1;
		 //        if (num==1) {
		 //           $(this).css("color","#D5D5D5"); 
		 //        }
			// 	if(num==0){
		 //            return;
		 //        }
			// 	$(this).next().val(num);
			// });
			// // 点击增加商品数量
			// $(".add").click(function(){
	  //           $(this).prev().prev().css("color","#A9A9A9");
			// 	var n=$(this).prev().val();
			// 	var num=parseInt(n)+1;
			// 	$(this).prev().val(num);
			// });

			mui('.sub-add').on('tap','.sub',function(){
	            
	        });

	        mui('.sub-add').on('tap','.add',function(){
	            
	        });
			

			mui('.mui-bar-tab').on('tap','a',function(){
	            window.location.href = this.getAttribute('href');
	        });
	        mui('.product-list-info').on('tap','a',function(){
	            window.location.href = this.getAttribute('href');
	        });

	        function cartIsEmpty () {
	        	console.log(mui('.mui-table-view-cell').length);
		        if (mui('.mui-table-view-cell').length===0) {
		            location.href="cart-empty.html";//跳到空的购物车页面
		        }
		    }

	        
		})(mui);

		


	   
	</script>
</body>
</html>